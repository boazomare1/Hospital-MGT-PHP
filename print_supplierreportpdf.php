<?phprequire_once('html2pdf/html2pdf.class.php');ob_start();session_start();include ("db/db_connect.php");error_reporting(0);$ipaddress = $_SERVER['REMOTE_ADDR'];$updatedatetime = date('Y-m-d');$username = $_SESSION['username'];$companyanum = $_SESSION['companyanum'];$companyname = $_SESSION['companyname'];$paymentreceiveddatefrom = date('Y-m-d', strtotime('-1 month'));$paymentreceiveddateto = date('Y-m-d');$transactiondatefrom = date('Y-m-d', strtotime('-1 month'));$transactiondateto = date('Y-m-d');$exchange_rate=1;$errmsg = "";$banum = "1";$supplieranum = "";$custid = "";$custname = "";$balanceamount = "0.00";$openingbalance = "0.00";$total = '0.00';$totalat = '0.00';$searchsuppliername = "";$cbsuppliername = "";$snocount = "";$colorloopcount="";$range = "";$arraysuppliername = '';$arraysuppliercode = '';	$totalatret = 0.00;$totalamount30 = 0;$totalamount60 = 0;$totalamount90 = 0;$totalamount120 = 0;$totalamount180 = 0;$totalamountgreater = 0;$totalamount302 = 0;$totalamount602 = 0;$totalamount902 = 0;$totalamount1202 = 0;$totalamount1802 = 0;$totalamountgreater2 = 0;$returnamount451=0;$query1 = "select * from master_company where auto_number = '$companyanum'";$exec1 = mysqli_query($GLOBALS["___mysqli_ston"], $query1) or die ("Error in Query1".mysqli_error($GLOBALS["___mysqli_ston"]));$res1 = mysqli_fetch_array($exec1);$res1companyname = $res1['companyname'];$res1address1 = $res1['address1'];$resfaxnumber1 = $res1['faxnumber1'];$res1area = $res1['area'];$res1city = $res1['city'];$res1state = $res1['state'];$res1emailid1= $res1['emailid1'];$res1country = $res1['country'];$res1pincode = $res1['pincode'];$phonenumber1 = $res1['phonenumber1'];$locationname = $res1['locationname'];$locationcode = $res1['locationcode'];if (isset($_REQUEST["name"])) { $searchsuppliername = $_REQUEST["name"]; } else { $searchsuppliername = ""; }if (isset($_REQUEST["code"])) { $arraysuppliercode = $_REQUEST["code"]; } else { $arraysuppliercode = ""; }//echo $searchsuppliername;if (isset($_REQUEST["ADate1"])) { $ADate1 = $_REQUEST["ADate1"]; } else { $ADate1 = ""; }//echo $ADate1;if (isset($_REQUEST["ADate2"])) { $ADate2 = $_REQUEST["ADate2"]; } else { $ADate2 = ""; }//echo $amount;if (isset($_REQUEST["cbfrmflag2"])) { $cbfrmflag2 = $_REQUEST["cbfrmflag2"]; } else { $cbfrmflag2 = ""; }//$cbfrmflag2 = $_REQUEST['cbfrmflag2'];if (isset($_REQUEST["frmflag2"])) { $frmflag2 = $_REQUEST["frmflag2"]; } else { $frmflag2 = ""; }//$frmflag2 = $_POST['frmflag2'];			$query21 = "select * from master_accountname where id = '$arraysuppliercode'";			$exec21 = mysqli_query($GLOBALS["___mysqli_ston"], $query21) or die ("Error in Query21".mysqli_error($GLOBALS["___mysqli_ston"]));			$res21 = mysqli_fetch_array($exec21);						$res21accountname = $res21['accountname'];			$supplieranum = $res21['auto_number'];?><?php  include("print_header1.php"); ?>	<table style="border-collapse:collapse;" cellspacing="3" cellpadding="0" width="1400" align="left" border="1">	<thead>		<tr>			<td colspan="10" class="bodytext31"  valign="middle"  align="center" >&nbsp;</td>  		</tr>		<tr>			<td colspan="10" class="bodytext31"  valign="middle"  align="center" ><strong>Supplier Statement </strong></td>  		</tr>				<?php 					if( $res21accountname != '')		{		?>		<tr >			<td colspan="10"  align="left" valign="middle" bgcolor="#ffffff" class="bodytext31"><strong><?php echo $res21accountname;?> (Date From: <?php echo $ADate1; ?> Date To: <?php echo $ADate2;?>)</strong></td>		</tr>				<?php } ?>				<tr>              <td width="30" class="bodytext31" valign="middle"  align="left"                 bgcolor="#ffffff"><strong>No.</strong></td>              <td width="70" align="left" valign="middle"                  bgcolor="#ffffff" class="bodytext31"> <strong>Date</strong> </td>              <td width="170" align="left" valign="middle"                  bgcolor="#ffffff" class="bodytext31"><strong> Description </strong></td>				<td width="80" align="left" valign="middle"                  bgcolor="#ffffff" class="bodytext31"><strong> Cheque No </strong></td>              <td width="100" align="left" valign="middle"                  bgcolor="#ffffff" class="bodytext31"><strong>Sup Inv no.</strong></td>              <td width="120" align="left" valign="middle"  bgcolor="#ffffff" class="bodytext31"><strong>GRN No.</strong></td>              <td width="120" align="left" valign="middle"  bgcolor="#ffffff" class="bodytext31"><strong>PO No.</strong></td>              <td width="100" align="right" valign="middle"                  bgcolor="#ffffff" class="bodytext31"><strong>Debit</strong></td>              <td width="100" align="right" valign="middle"                  bgcolor="#ffffff" class="bodytext31"> <strong>Credit</strong> </td>				 				<td width="80" align="right" valign="middle"                  bgcolor="#ffffff" class="bodytext31"> <strong>Current Balance</strong> </td>            </tr>			 </thead>			 <tbody>			<?php					// $query1 = "select * from master_supplier where suppliercode = '$arraysuppliercode'";			//$exec1 = mysql_query($query1) or die ("Error in Query1".mysql_error());			//$res1 = mysql_fetch_array($exec1);			//$openingbalance = $res1['openingbalance'];				$openingbalance =0;			$id = $arraysuppliercode;			$query_acc = "select * from master_accountname where id = '$id'";				  $exec1 = mysqli_query($GLOBALS["___mysqli_ston"], $query_acc) or die ("Error in query_acc".mysqli_error($GLOBALS["___mysqli_ston"]));				  $res1 = mysqli_fetch_array($exec1);				  $currency = $res1['currency'];				  $cur_qry = "select * from master_currency where currency like '$currency'";				  $exec21 = mysqli_query($GLOBALS["___mysqli_ston"], $cur_qry) or die ("Error in cur_qry".mysqli_error($GLOBALS["___mysqli_ston"]));				  $res21 = mysqli_fetch_array($exec21);				  $exchange_rate = $res21['rate'];				  if($exchange_rate == 0.00)				  {					  $exchange_rate=1;				  }				  //$exchange_rate;				$querycr1op = "SELECT sum(-1*`transactionamount`) as payables, suppliercode as code, CONCAT('Payment - ',remarks) as name, docno as docno, transactiondate as date,chequenumber as chequenum FROM `master_transactionpharmacy` WHERE `suppliercode` = '$id' AND `transactionmodule` = 'PAYMENT' AND (`docno` LIKE 'SP%' or `docno` LIKE 'SPE%') AND `transactiondate` < '$ADate1'						 						 UNION ALL SELECT sum(-1*`totalamount`) as payables,suppliercode as code, CONCAT('Return - ',suppliername) as name, billnumber as docno, entrydate as date,typeofreturn as chequenum FROM `purchasereturn_details` WHERE `suppliercode` = '$id' AND billnumber NOT LIKE 'SPCA%' AND `entrydate` < '$ADate1'						 						 UNION ALL SELECT sum(-1*`debitamount`) as payables, locationcode as code, CONCAT('Journal - ',ledgername) as name, docno as docno, entrydate as date,vouchertype as chequenum FROM `master_journalentries` WHERE `ledgerid` = '$id' AND selecttype = 'Dr' AND `entrydate` < '$ADate1'						 						 UNION ALL SELECT sum(-1*`transactionamount`) as payables,expensecoa as code, remarks as name, docnumber as docno, transactiondate as date, chequenumber as chequenum FROM `expensesub_details` WHERE `expensecoa` = '$id' AND transactionmode <> 'ADJUSTMENT' AND transactiondate < '$ADate1'												 UNION ALL SELECT sum(-1*`openbalanceamount`) as payables, docno as code, CONCAT('Opening Balance as of may 1st - ',accountname) as name, docno as docno, entrydate as date, 'Opening Balance' as chequenum FROM `openingbalanceaccount` WHERE `accountcode` = '$id' AND `entrydate` < '$ADate1'												UNION ALL SELECT sum(`openbalanceamount`) as payables, docno as code, CONCAT('Opening Balance as of may 1st - ',accountname) as name, docno as docno, entrydate as date, 'Opening Balance' as chequenum FROM `openingbalancesupplier` WHERE `accountcode` = '$id' AND `entrydate` < '$ADate1' and payablestatus ='1'												 UNION ALL SELECT sum(`transactionamount`) as payables, suppliercode as code, CONCAT('Purchase - ',suppliername) as name, billnumber as docno, transactiondate as date,chequenumber as chequenum FROM `master_transactionpharmacy` WHERE `suppliercode` = '$id' AND `billnumber` NOT LIKE 'SUPO%' AND `transactiontype` = 'PURCHASE' AND `transactiondate` < '$ADate1'						 UNION ALL SELECT sum(`creditamount`) as payables, locationcode as code, CONCAT('Journal - ',ledgername) as name, docno as docno, entrydate as date,vouchertype as chequenum FROM `master_journalentries` WHERE `ledgerid` = '$id' AND selecttype = 'Cr' AND `entrydate` < '$ADate1'						 UNION ALL SELECT sum(`totalamount`) as payables,suppliercode as code, CONCAT('Payable Credit - ',suppliername) as name, billnumber as docno, entrydate as date,typeofreturn as chequenum FROM `purchasereturn_details` WHERE `suppliercode` = '$id' AND billnumber LIKE 'SPCA%' AND `entrydate` < '$ADate1'";						$execcr1 = mysqli_query($GLOBALS["___mysqli_ston"], $querycr1op) or die ("Error in querycr1op".mysqli_error($GLOBALS["___mysqli_ston"]));						while($rescr1 = mysqli_fetch_array($execcr1))						{							$payables = $rescr1['payables'];							$payables = $payables / $exchange_rate;						    $openingbalance += $payables;						}						/////////////// for wht //////////////		  $wh_tax_value=0;		   $query222 = "select sum(wh_tax_value) as wh_tax_value from purchase_details where suppliercode = '$id' and entrydate < '$ADate1' group by billnumber";		  $exec222 = mysqli_query($GLOBALS["___mysqli_ston"], $query222) or die ("Error in Query222".mysqli_error($GLOBALS["___mysqli_ston"]));		  $res222 = mysqli_fetch_array($exec222);		  $wh_tax_value = $res222['wh_tax_value'];		  //////////////// for wht //////////////		  $openingbalance=$openingbalance-$wh_tax_value;		 								  ?>			<!--			<tr>			<td width="40" class="bodytext31" valign="middle"  align="left"                ><strong>&nbsp;</strong></td>				              <td  width="70"   align="left" valign="center"                  class="bodytext31"> <strong>&nbsp;</strong> </td>              <td  width="70"   align="left" valign="center"                  class="bodytext31"><strong> Opening Balance </strong></td>              <td  width="70"   align="left" valign="center"                  class="bodytext31">&nbsp;</td>				<td  width="70"   align="left" valign="center"                  class="bodytext31">&nbsp;</td>              <td  width="70"   align="left" valign="center"                  class="bodytext31">&nbsp;</td>              <td  width="70"   align="right" valign="center"                  class="bodytext31"><strong>&nbsp;</strong></td>              <td  width="70"   align="left" valign="center"                  class="bodytext31"> <strong>&nbsp;</strong> </td>			 <td  width="70"   align="left" valign="center"                  class="bodytext31"> <strong>&nbsp;</strong> </td>					<td  width="70"   align="left" valign="center"                  class="bodytext31"> <strong><?php echo number_format($openingbalance,2,'.',''); ?></strong> </td>			</tr>-->						<?php			if (isset($_REQUEST["cbfrmflag1"])) { $cbfrmflag1 = $_REQUEST["cbfrmflag1"]; } else { $cbfrmflag1 = ""; }			if ($cbfrmflag1 == 'cbfrmflag1')			{$totalamount451=0;$res85supplierbillnumber='';		   	 $query21 = "select * from master_supplier where suppliercode = '$arraysuppliercode' and   status <>'DELETED' and dateposted between '$ADate1' and '$ADate2' group by suppliername order by suppliername desc ";			$exec21 = mysqli_query($GLOBALS["___mysqli_ston"], $query21) or die ("Error in Query21".mysqli_error($GLOBALS["___mysqli_ston"]));			$res21 = mysqli_fetch_array($exec21);			  $res21accountname = $res21['suppliername'];			$supplieranum = $res21['auto_number'];			 ?>         <!--			<tr bgcolor="#ffffff">            <td colspan="10"  align="left" valign="center" bgcolor="#ffffff" class="bodytext31"><strong><?php echo $res21accountname;?> (Date From: <?php echo $ADate1; ?> Date To: <?php echo $ADate2;?>)</strong></td>            </tr>-->				    <?php						 $query45 = "select transactiondate as groupdate,suppliername,suppliercode,sum(transactionamount) as totalfxamount,billnumber, auto_number from master_transactionpharmacy where suppliercode = '$arraysuppliercode' and transactiondate between '$ADate1' and '$ADate2' and transactiontype = 'PURCHASE' group by billnumber ";		$query45 .= " union all select a.billdate as groupdate,a.patientname,a.patientcode,a.transactionamount as totalfxamount,a.billnumber,a.auto_number from paymentmodecredit as a join master_transactionpharmacy as b on (a.billnumber = b.docno) where a.source = 'supplierpaymententry' and b.suppliercode = '$arraysuppliercode' and a.billdate between '$ADate1' and '$ADate2'  group by a.billnumber";		  $query45 .= " union all select entrydate as groupdate,suppliername,suppliercode,sum(subtotal) as totalfxamount,billnumber,grnbillnumber from purchasereturn_details where suppliercode = '$arraysuppliercode' and entrydate between '$ADate1' and '$ADate2' and billnumber not like 'SPCA%' group by billnumber,grnbillnumber";		  $query45 .= " UNION ALL SELECT entrydate as groupdate,username,locationcode,sum(`openbalanceamount`) as totalfxamount, docno as billnumber,auto_number FROM `openingbalanceaccount` WHERE `accountcode` = '$arraysuppliercode' AND `entrydate` between '$ADate1' and '$ADate2'";		    $query45 .= " union all select entrydate as groupdate,username,locationcode,sum(creditamount-debitamount) as totalfxamount,docno as billnumber,auto_number from master_journalentries where ledgerid = '$arraysuppliercode' and entrydate between '$ADate1' and '$ADate2' group by docno order by groupdate asc";//		echo $query45;		   		  $exec4512 = mysqli_query($GLOBALS["___mysqli_ston"], $query45) or die ("Error in Query45".mysqli_error($GLOBALS["___mysqli_ston"]));		//  $num45 = mysql_num_rows($exec45);		  while ($res45 = mysqli_fetch_array($exec4512))		  {     	  $res45billnumber = $res45['billnumber'];		  $res45autonum = $res45['auto_number'];		  $res45transactiondate=$res45['groupdate'];		  $res45transactionamount=$res45['totalfxamount'];		  				   $query451= "select transactiondate,sum(transactionamount) as transactionamount,billnumber from master_transactionpharmacy where auto_number='$res45autonum' and  billnumber='$res45billnumber' and  suppliercode = '$arraysuppliercode' and transactiondate between '$ADate1' and '$ADate2' and transactiontype = 'PURCHASE' group by billnumber";		  		  $exec451 = mysqli_query($GLOBALS["___mysqli_ston"], $query451) or die ("Error in Query45".mysqli_error($GLOBALS["___mysqli_ston"]));		  while($res451=mysqli_fetch_array($exec451))		{  		  $num451 = mysqli_num_rows($exec451);		  if($num451>0)		  {		  	  $res451transactiondate = $res451['transactiondate'];		$res451transactionamount1 = $res451['transactionamount'];		  $res451billnumber=$res451['billnumber'];		  		  		  $query452= "select sum(transactionamount) as transactionamount from master_transactionpharmacy where  billnumber='$res451billnumber' and  suppliercode = '$arraysuppliercode'  and transactiontype = 'PAYMENT' and recordstatus='allocated' group by billnumber";		  $exe452=mysqli_query($GLOBALS["___mysqli_ston"], $query452);		  $res452=mysqli_fetch_array($exe452);		  		 $totalpayment=$res452['transactionamount'];		  		  $returnamount = 0;		  $query652 = "select sum(totalamount) as totalfxamount from purchasereturn_details where suppliercode = '$arraysuppliercode' and  grnbillnumber='$res451billnumber'		  UNION ALL select sum(subtotal) as totalfxamount from purchasereturn_details where suppliercode = '$arraysuppliercode' and grnbillnumber IN (select mrnno from master_transactionpharmacy where billnumber = '$res451billnumber' and transactiontype = 'PURCHASE')";		  $exe652=mysqli_query($GLOBALS["___mysqli_ston"], $query652) or die("Error in query652".mysqli_error($GLOBALS["___mysqli_ston"]));		  while($res652=mysqli_fetch_array($exe652))		  {		  $returnamount+=$res652['totalfxamount'];		  }		if($snocount==0)		{			$totalamount420 =$res451transactionamount-($totalpayment + $returnamount)+$openingbalance;}else{$totalamount420 =$res451transactionamount-($totalpayment + $returnamount);}			$totalamount451 =$totalamount420;				$totalamount451 = $totalamount451 / $exchange_rate;		  $t1 = strtotime("$ADate2");		  $t2 = strtotime("$res451transactiondate");		  $days_between = ceil(abs($t1 - $t2) / 86400);		  $days_between = intval($days_between);		  		  if($days_between <= 30)		  {				  $totalamount302 = $totalamount302 + $totalamount451;				  }		  else if(($days_between >30) && ($days_between <=60))		  {				  $totalamount602 = $totalamount602 + $totalamount451;				  }		  else if(($days_between >60) && ($days_between <=90))		  {				  $totalamount902 = $totalamount902 + $totalamount451;				  }		  else if(($days_between >90) && ($days_between <=120))		  {				  $totalamount1202 = $totalamount1202 + $totalamount451;				  }		  else if(($days_between >120) && ($days_between <=180))		  {				  $totalamount1802 = $totalamount1802 + $totalamount451;				  }		  else		  {				  $totalamountgreater2 = $totalamountgreater2 + $totalamount451;		  }			   }				}		  		  		   $query4511= "select auto_number from master_transactionpharmacy where auto_number='$res45autonum' and  billnumber='$res45billnumber' and  suppliercode = '$arraysuppliercode' and transactiondate between '$ADate1' and '$ADate2' and transactiontype = 'PURCHASE'";		  		  $exec4511 = mysqli_query($GLOBALS["___mysqli_ston"], $query4511) or die ("Error in Query45".mysqli_error($GLOBALS["___mysqli_ston"]));		  $num4511 = mysqli_num_rows($exec4511);		  if($num4511>0)		  {		  		  $res45transactiondate = $res45['groupdate'];	      $res45patientname = $res45['suppliername'];		  $res45patientcode = $res45['suppliercode'];		  $res45transactionamount1 = $res45['totalfxamount'];				  /////////////// for wht //////////////		  $wh_tax_value=0;		   $query222 = "select sum(wh_tax_value) as wh_tax_value from purchase_details where billnumber='$res45billnumber' and suppliercode = '$arraysuppliercode' and entrydate between '$ADate1' and '$ADate2' group by billnumber";		  $exec222 = mysqli_query($GLOBALS["___mysqli_ston"], $query222) or die ("Error in Query222".mysqli_error($GLOBALS["___mysqli_ston"]));		  $res222 = mysqli_fetch_array($exec222);		  $wh_tax_value = $res222['wh_tax_value'];		  //////////////// for wht //////////////		  $res45transactionamount=$res45transactionamount1-$wh_tax_value;		    $res45transactionamount = $res45transactionamount / $exchange_rate;		  		  $res85supplierponumber=""; 		  $mrnnumber=""; 		  $query85 = "select deliverybillno,ponumber, mrnno,entrydate from purchase_details where billnumber = '$res45billnumber' order by entrydate desc";		   // and entrydate between '$ADate1' and '$ADate2'		  $exec85 = mysqli_query($GLOBALS["___mysqli_ston"], $query85) or die ("Error in Query85".mysqli_error($GLOBALS["___mysqli_ston"]));		  //echo $num = mysql_num_rows($exec3);		  while($res85 = mysqli_fetch_array($exec85)){		  	 $res45transactiondate = $res85['entrydate'];		  	 $res85supplierponumber = $res85['ponumber'].','.$res85supplierponumber;		  	 $mrnnumber = $res85['mrnno'].','.$mrnnumber;		  	 		  	 // $res85supplierponumber = $res85['ponumber'].$res85['mrnno'].'  '.$res85supplierponumber;		  }		  $ponumbers_unique=implode(', ',array_unique(explode(',', $res85supplierponumber)));		  $ponumbers_unique=trim($ponumbers_unique, ', ');		  $mrnnumbers_unique=implode(',',array_unique(explode(',', $mrnnumber)));		  $mrnnumbers_unique=trim($mrnnumbers_unique, ', ');				  //$res85supplierbillnumber = $res85['deliverybillno'];		  		  $query852 = "select supplierbillnumber from master_purchase where billnumber = '$res45billnumber' ";		  $exec852 = mysqli_query($GLOBALS["___mysqli_ston"], $query852) or die ("Error in Query852".mysqli_error($GLOBALS["___mysqli_ston"]));		  //echo $num = mysql_num_rows($exec3);		  $res852 = mysqli_fetch_array($exec852);		  		  $res85supplierbillnumber = $res852['supplierbillnumber'];		 		  $t1 = strtotime("$ADate2");		  $t2 = strtotime("$res45transactiondate");		  $days_between = ceil(abs($t1 - $t2) / 86400);		  $days_between = intval($days_between);		   $snocount = $snocount + 1;		   		   if($snocount == 1)		  {		   $total = $openingbalance +$res45transactionamount ;		  }		  else		  {		  $total = $total + $res45transactionamount;		  }		  if ($res45transactionamount == '')		  {		  $res45transactionamount = '0.00';		  }		  else		  {		  // $res45transactionamount = $res45['totalfxamount'];		  $res45transactionamount = $res45transactionamount / $exchange_rate;		  }		  		  if($days_between <= 30)		  {		  if($snocount == 1)		  {		  $totalamount30 = $openingbalance + $res45transactionamount;		  }		  else		  {		  $totalamount30 = $totalamount30 + $res45transactionamount;		  }		  }		  else if(($days_between >30) && ($days_between <=60))		  {		  if($snocount == 1)		  {		  $totalamount60 = $openingbalance + $res45transactionamount;		  }		  else		  {		  $totalamount60 = $totalamount60 + $res45transactionamount;		  }		  }		  else if(($days_between >60) && ($days_between <=90))		  {		  if($snocount == 1)		  {		  $totalamount90 = $openingbalance + $res45transactionamount;		  }		  else		  {		  $totalamount90 = $totalamount90 + $res45transactionamount;		  }		  }		  else if(($days_between >90) && ($days_between <=120))		  {		  if($snocount == 1)		  {		  $totalamount120 = $openingbalance + $res45transactionamount;		  }		  else		  {		  $totalamount120 = $totalamount120 + $res45transactionamount;		  }		  }		  else if(($days_between >120) && ($days_between <=180))		  {		    if($snocount == 1)		  {		  $totalamount180 = $openingbalance + $res45transactionamount;		  }		  else		  {		  $totalamount180 = $totalamount180 + $res45transactionamount;		  }		  }		  else		  {		      if($snocount == 1)		  {		  $totalamountgreater = $openingbalance + $res45transactionamount;		  }		  else		  {		  $totalamountgreater = $totalamountgreater + $res45transactionamount;		  }		  }		  if($snocount==1)		  {		 $totalat = $totalat + $res45transactionamount + $openingbalance;	}	else	{	$totalat = $totalat + $res45transactionamount;	}		 			   		$colorloopcount = $colorloopcount + 1;			$showcolor = ($colorloopcount & 1); 			if ($showcolor == 0)			{				//echo "if";				$colorcode = 'bgcolor="#CBDBFA"';			}			else			{				//echo "else";				$colorcode = 'bgcolor="#ecf0f5"';			}	       			?>			           <tr >              <td  width="30" class="bodytext31" valign="middle"  align="left"><?php echo $snocount; ?></td>               <td  width="40" class="bodytext31" valign="middle"  align="left">                 <?php echo $res45transactiondate; ?> </td>              <td  width="160" class="bodytext31" valign="middle"  align="left">                 <?php echo 'Towards Purchase'; ?>  </td>				<td  width="80" class="bodytext31" valign="middle"  align="left"><?php echo ''; ?></td>              <td  width="100" class="bodytext31" valign="middle"  align="left"><?php echo $res85supplierbillnumber; ?></td>              <td  width="80" class="bodytext31" valign="middle"  align="left"><?php echo $res45billnumber; ?></td>              <!-- <td  width="80" class="bodytext31" valign="middle"  align="left"><?php echo $ponumbers_unique; ?></td> -->              <td class="bodytext31" valign="center"  align="left"><?php //echo $ponumbers_unique;                $ponum = explode(",", $ponumbers_unique); // splitting the string by commas			 				foreach($ponum as $ponums) {				 $ponums = trim($ponums);                      $fetch_PI='';					  $query_fetch_PI = "SELECT  purchaseindentdocno from purchaseorder_details where billnumber='$ponums' group by billnumber";					  $exec_fetch_PI = mysqli_query($GLOBALS["___mysqli_ston"], $query_fetch_PI) or die ("Error in Query_fetch_PI".mysqli_error($GLOBALS["___mysqli_ston"]));					  $num = mysqli_num_rows($exec_fetch_PI);					  if($num>0){					  while($res_fetch_PI = mysqli_fetch_array($exec_fetch_PI)){					  		  $fetch_PI = $res_fetch_PI['purchaseindentdocno'];					  }					  $query_lpo_type = "SELECT lpo_type from purchase_indent where docno='$fetch_PI' group by docno ";					  $exec_lpo_type = mysqli_query($GLOBALS["___mysqli_ston"], $query_lpo_type) or die ("Error in Query_lpo_type".mysqli_error($GLOBALS["___mysqli_ston"]));					  $res_lpo_type = mysqli_fetch_array($exec_lpo_type);					  		  $lpo_type = $res_lpo_type['lpo_type'];					  		  if($lpo_type=='CREDIT'){					  		  	echo "<font style='color:red;'> ".trim($ponums)."</font>";					  		  }elseif($lpo_type=='CASH'){					  		  	echo "<font style='color:green;'> ".trim($ponums)."</font>";					  		  }else{					  		  	echo "<font style='color:indigo;'> ".trim($ponums)."</font>";					  		  }					  		}else{					  			// $query_lpo_type = "SELECT billnumber from manual_lpo where docno='$fetch_PI' group by docno ";					  			echo "<font> ".trim($ponums)."</font>";					  		}					 					}					 ?></td>              <td  width="80" class="bodytext31" valign="middle"  align="right">			  <?php  ?></td>              <td  width="100" class="bodytext31" valign="middle"  align="right"> <?php echo number_format($res45transactionamount,2,'.',',');?> </td>				<!-- <td  width="40" class="bodytext31" valign="middle"  align="right">			     <?php echo $days_between;?> </td> -->               <td  width="125" class="bodytext31" valign="middle"  align="right"> <?php echo number_format($totalat,2,'.',','); ?> </td>           </tr>		   <?php		   }		   ?>						<?php		  $query51 = "select auto_number from paymentmodecredit where billnumber='$res45billnumber'";		  $exec51 = mysqli_query($GLOBALS["___mysqli_ston"], $query51) or die ("Error in Query5".mysqli_error($GLOBALS["___mysqli_ston"]));		   $num = mysqli_num_rows($exec51);//$num=0;		//  while ($res51 = mysql_fetch_array($exec51))		if($num>0)		  {		  $paymentdocno = $res45['billnumber'];		  $res5transactionamount = $res45['totalfxamount'];		  $res5transactiondate = $res45['groupdate'];		  		   $query5 = "select * from master_transactionpharmacy where suppliercode = '$arraysuppliercode' and transactiondate between '$ADate1' and '$ADate2' and transactionmodule = 'PAYMENT' and docno ='$paymentdocno' and recordstatus <> 'deallocated'  order by transactiondate desc";		  $exec5 = mysqli_query($GLOBALS["___mysqli_ston"], $query5) or die ("Error in Query5".mysqli_error($GLOBALS["___mysqli_ston"]));		  $num5 = mysqli_num_rows($exec5);		  if($num5 > 0)		  {		  while($res5 = mysqli_fetch_array($exec5))		  {     	  	      $res5patientname = $res5['suppliername'];		  $res5patientcode = $res5['suppliercode'];		  		  $res5billnumber = $res5['billnumber'];		  $res5openingbalance = $res5['openingbalance'];		  $res5docnumber = $res5['docno'];		  $res5particulars = $res5['particulars'];		  $res5transactionamount = $res5['transactionamount'];		  //$res5particulars = substr($res5particulars,2,6);		  $res5transactionmode= $res5['transactionmode'];		  $res5chequenumber= $res5['chequenumber'];		  $res5remarks = $res5['remarks'];		  		  $query15 = "select * from master_purchase where billnumber = '$res5billnumber' ";		  $exec15 = mysqli_query($GLOBALS["___mysqli_ston"], $query15) or die ("Error in Query15".mysqli_error($GLOBALS["___mysqli_ston"]));		  //echo $num = mysql_num_rows($exec3);		   $res15 = mysqli_fetch_array($exec15);		   $query852 = "select supplierbillnumber from master_purchase where billnumber = '$res5billnumber' ";		  $exec852 = mysqli_query($GLOBALS["___mysqli_ston"], $query852) or die ("Error in Query852".mysqli_error($GLOBALS["___mysqli_ston"]));		  //echo $num = mysql_num_rows($exec3);		  $res852 = mysqli_fetch_array($exec852);		  $res85supplierbillnumber = $res852['supplierbillnumber'];		  		  $res15supplierbillnumber = $res15['supplierbillnumber'];		   $snocount = $snocount + 1;		 		  $t1 = strtotime("$ADate2");		  $t2 = strtotime("$res5transactiondate");		  $days_between = ceil(abs($t1 - $t2) / 86400);		  $days_between = intval($days_between);		  		  $res5transactionamount = $res5transactionamount / $exchange_rate;		  		  	  if($days_between <= 30)		  {		  $totalamount30 = $totalamount30 - $res5transactionamount;		  		 //echo $totalamount30;		  }		  else if(($days_between >30) && ($days_between <=60))		  {		  $totalamount60 = $totalamount60 - $res5transactionamount;		 		  }		  else if(($days_between >60) && ($days_between <=90))		  {		  $totalamount90 = $totalamount90 - $res5transactionamount;		  		  }		  else if(($days_between >90) && ($days_between <=120))		  {		 		  $totalamount120 = $totalamount120 - $res5transactionamount;		 		  }		  else if(($days_between >120) && ($days_between <=180))		  {		 		  $totalamount180 = $totalamount180 - $res5transactionamount;		 		  }		  else		  {		  		  $totalamountgreater = $totalamountgreater - $res5transactionamount;		  		  }		  				 		  $total = $res5transactionamount + $res5openingbalance;		 if($snocount=='1')		 {		  $totalat = $totalat + $openingbalance - $total;	}	else	{	 $totalat = $totalat - $total;	}		  		 						//echo $cashamount;			$colorloopcount = $colorloopcount + 1;			$showcolor = ($colorloopcount & 1); 			if ($showcolor == 0)			{				//echo "if";				$colorcode = 'bgcolor="#CBDBFA"';			}			else			{				//echo "else";				$colorcode = 'bgcolor="#ecf0f5"';			}	       			?>			<tr >              <td  width="30" class="bodytext31" valign="middle"  align="left"><?php echo $snocount; ?></td>               <td  width="70" class="bodytext31" valign="middle"  align="left">                 <?php echo $res5transactiondate; ?> </td>              <td  width="180" class="bodytext31" valign="middle"  align="left">                 <?php echo 'Towards Payment ('.$res5transactionmode.','.$res5remarks; ?> </td>              <td  width="80" class="bodytext31" valign="middle"  align="left"><?php echo $res5chequenumber; ?></td>			  <!-- <td  width="126" class="bodytext31" valign="middle"  align="left">&nbsp;</td> -->			  <td  width="126" class="bodytext31" valign="middle"  align="left"><?php echo $res85supplierbillnumber; ?></td>              <td  width="120" class="bodytext31" valign="middle"  align="left"><?php echo $res5docnumber;?></td>              <td class="bodytext31" valign="center"  align="left">&nbsp;</td>              <td  width="80" class="bodytext31" valign="middle"  align="right">			  <?php echo number_format($res5transactionamount,2,'.',','); ?></td>              <td  width="100" class="bodytext31" valign="middle"  align="right">			     <?php ?> </td>				<!-- <td  width="40" class="bodytext31" valign="middle"  align="right">			     <?php echo $days_between;?> </td> -->               <td  width="80" class="bodytext31" valign="middle"  align="right">			     <?php echo number_format($totalat,2,'.',','); ?> </td>           </tr>		   <?php		   }		   }		   }  		   ?>                        <?php		      		      		  $query65 = "select auto_number from openingbalanceaccount where docno='$res45billnumber'";		  $exec65 = mysqli_query($GLOBALS["___mysqli_ston"], $query65) or die ("Error in Query65".mysqli_error($GLOBALS["___mysqli_ston"]));		   $num65 = mysqli_num_rows($exec65);		//  while ($res65 = mysql_fetch_array($exec65))		//$num=0;		if($num65>0)		  {     	  $res65transactiondate = $res45['groupdate'];	      $res65patientname = $res45['suppliername']; 		  $res65patientcode = $res45['suppliercode'];		  $res65subtotal= $res45['totalfxamount'];		  $res65billnumber = '';		  $res65grnnumber = $res45['billnumber'];		  $res65subtotal = $res65subtotal / $exchange_rate;		  $totalatret = $totalat - $res65subtotal ;		  		  		  $snocount = $snocount + 1;		  		    			if($snocount=='1')			{			$totalat = $totalat + $openingbalance - $res65subtotal; 			}						else			{			$totalat = $totalat - $res65subtotal; 			}		  		  if($days_between <= 30)		  {		  $totalamount30 = $totalamount30 - $res65subtotal;		  		 //echo $totalamount30;		  }		  else if(($days_between >30) && ($days_between <=60))		  {		  $totalamount60 = $totalamount60 - $res65subtotal;		 		  }		  else if(($days_between >60) && ($days_between <=90))		  {		  $totalamount90 = $totalamount90 - $res65subtotal;		  		  }		  else if(($days_between >90) && ($days_between <=120))		  {		 		  $totalamount120 = $totalamount120 - $res65subtotal;		 		  }		  else if(($days_between >120) && ($days_between <=180))		  {		 		  $totalamount180 = $totalamount180 - $res65subtotal;		 		  }		  else		  {		  		  $totalamountgreater = $totalamountgreater - $res65subtotal;		  		  }		  						//echo $cashamount;			$colorloopcount = $colorloopcount + 1;			$showcolor = ($colorloopcount & 1); 			if ($showcolor == 0)			{				//echo "if";				$colorcode = 'bgcolor="#CBDBFA"';			}			else			{				//echo "else";				$colorcode = 'bgcolor="#ecf0f5"';			}	       			?>			           <tr>              <td  width="30" class="bodytext31" valign="middle"  align="left"><?php echo $snocount; ?></td>               <td  width="70" class="bodytext31" valign="middle"  align="left">                 <?php echo $res65transactiondate; ?> </td>              <td  width="180" class="bodytext31" valign="middle"  align="left">                 <?php echo 'Towards Opening Debit' ?> </td>              <td  width="80" class="bodytext31" valign="middle"  align="left"><?php echo $res65billnumber;?></td>			  <td  width="80" class="bodytext31" valign="middle"  align="left">&nbsp;</td>              <td  width="120" class="bodytext31" valign="middle"  align="left"><?php echo $res65grnnumber;?></td>              <td class="bodytext31" valign="center"  align="left">&nbsp;</td>              <td  width="100" class="bodytext31" valign="middle"  align="right">			  <?php echo number_format($res65subtotal,2,'.',','); ?></td>              <td  width="80" class="bodytext31" valign="middle"  align="right">			     <?php ?> </td>				<!-- <td  width="40" class="bodytext31" valign="middle"  align="right">			     <?php echo $days_between;?> </td> -->               <td  width="80" class="bodytext31" valign="middle"  align="right">			     <?php echo number_format($totalat,2,'.',','); ?> </td>           </tr>		   <?php		   }  		   ?>		   		   		   <?php		      		  $query65 = "select auto_number from purchasereturn_details where billnumber='$res45billnumber'";		  $exec65 = mysqli_query($GLOBALS["___mysqli_ston"], $query65) or die ("Error in Query65".mysqli_error($GLOBALS["___mysqli_ston"]));		   $num65 = mysqli_num_rows($exec65);		//  while ($res65 = mysql_fetch_array($exec65))		//$num=0;		if($num65>0)		  {     	  $res65transactiondate = $res45['groupdate'];	      $res65patientname = $res45['suppliername']; 		  $res65patientcode = $res45['suppliercode'];		  $res65subtotal= $res45['totalfxamount'];		  $res65billnumber = $res45['billnumber'];		  $res65grnnumber = $res45['auto_number'];		  $res65subtotal = $res65subtotal / $exchange_rate;		  $totalatret = $totalat - $res65subtotal ;		  		  		  $snocount = $snocount + 1;		  		    			if($snocount=='1')			{			$totalat = $totalat + $openingbalance - $res65subtotal; 			}						else			{			$totalat = $totalat - $res65subtotal; 			}		  		  if($days_between <= 30)		  {		  $totalamount30 = $totalamount30 - $res65subtotal;		  		 //echo $totalamount30;		  }		  else if(($days_between >30) && ($days_between <=60))		  {		  $totalamount60 = $totalamount60 - $res65subtotal;		 		  }		  else if(($days_between >60) && ($days_between <=90))		  {		  $totalamount90 = $totalamount90 - $res65subtotal;		  		  }		  else if(($days_between >90) && ($days_between <=120))		  {		 		  $totalamount120 = $totalamount120 - $res65subtotal;		 		  }		  else if(($days_between >120) && ($days_between <=180))		  {		 		  $totalamount180 = $totalamount180 - $res65subtotal;		 		  }		  else		  {		  		  $totalamountgreater = $totalamountgreater - $res65subtotal;		  		  }		  						//echo $cashamount;			$colorloopcount = $colorloopcount + 1;			$showcolor = ($colorloopcount & 1); 			if ($showcolor == 0)			{				//echo "if";				$colorcode = 'bgcolor="#CBDBFA"';			}			else			{				//echo "else";				$colorcode = 'bgcolor="#ecf0f5"';			}	       	       			?>						           <tr >              <td  width="30" class="bodytext31" valign="middle"  align="left"><?php echo $snocount; ?></td>               <td  width="70" class="bodytext31" valign="middle"  align="left">                 <?php echo $res65transactiondate; ?> </td>              <td  width="180" class="bodytext31" valign="middle"  align="left">                 <?php echo 'Towards Return' ?> </td>              <td  width="80" class="bodytext31" valign="middle"  align="left"><?php echo $res65billnumber;?></td>			  <td  width="126" class="bodytext31" valign="middle"  align="left">&nbsp;</td>              <td  width="120" class="bodytext31" valign="middle"  align="left"><?php echo $res65grnnumber;?></td>              <td class="bodytext31" valign="center"  align="left">&nbsp;</td>              <td  width="80" class="bodytext31" valign="middle"  align="right">			  <?php echo number_format($res65subtotal,2,'.',','); ?></td>              <td  width="100" class="bodytext31" valign="middle"  align="right">			     <?php ?> </td>				<!-- <td  width="40" class="bodytext31" valign="middle"  align="right">			     <?php echo $days_between;?> </td> -->               <td  width="80" class="bodytext31" valign="middle"  align="right">			     <?php echo number_format($totalat,2,'.',','); ?> </td>           </tr>		   <?php		   }  		   ?>		  			<?php			$resjournalcreditpayment = 0;			$dotarray = explode("-", $paymentreceiveddateto);			$dotyear = $dotarray[0];			$dotmonth = $dotarray[1];			$dotday = $dotarray[2];			$paymentreceiveddateto = date("Y-m-d", mktime(0, 0, 0, $dotmonth, $dotday + 1, $dotyear));					      		  $query69 = "select auto_number from master_journalentries where docno='$res45billnumber'";		  $exec69 = mysqli_query($GLOBALS["___mysqli_ston"], $query69) or die ("Error in Query69".mysqli_error($GLOBALS["___mysqli_ston"]));		  $num69 = mysqli_num_rows($exec69);		//  while ($res69 = mysql_fetch_array($exec69))		if($num69>0)		  {     	  $journalcredit = $res45['totalfxamount'];		  $journaldate = $res45['groupdate'];		  $jusername = $res45['suppliername'];		  $jdocno = $res45['billnumber'];		  		   $t1 = strtotime("$ADate2");		  $t2 = strtotime("$journaldate");		  $days_between = ceil(abs($t1 - $t2) / 86400);		  $days_between = intval($days_between);		  		  $resjournalcreditpayment = $journalcredit;		  $resjournalcreditpayment = $resjournalcreditpayment / $exchange_rate;				  if($resjournalcreditpayment != 0)		  {		  $totalat = $totalat + $resjournalcreditpayment;		 		 	  		  if($days_between <= 30)		  {		 		  $totalamount302 = $totalamount302 + $resjournalcreditpayment;		 		  }		  else if(($days_between >30) && ($days_between <=60))		  {		 		  $totalamount602 = $totalamount602 + $resjournalcreditpayment;		  		  }		  else if(($days_between >60) && ($days_between <=90))		  {				  $totalamount902 = $totalamount902 + $resjournalcreditpayment;		 		  }		  else if(($days_between >90) && ($days_between <=120))		  {		 		  $totalamount1202 = $totalamount1202 + $resjournalcreditpayment;		  		  }		  else if(($days_between >120) && ($days_between <=180))		  {		 		  $totalamount1802 = $totalamount1802 + $resjournalcreditpayment;		  		  }		  else		  {				  $totalamountgreater2 = $totalamountgreater2 + $resjournalcreditpayment;		  		  }		   $snocount = $snocount + 1;			if($snocount=='1')			{			$totalat=$totalat+$openingbalance;			}			//echo $cashamount;			$colorloopcount = $colorloopcount + 1;			$showcolor = ($colorloopcount & 1); 			if ($showcolor == 0)			{				//echo "if";				$colorcode = 'bgcolor="#CBDBFA"';			}			else			{				//echo "else";				$colorcode = 'bgcolor="#ecf0f5"';			}					?>						           <tr >              <td  width="30" class="bodytext31" valign="middle"  align="left"><?php echo $snocount; ?></td>               <td  width="70" class="bodytext31" valign="middle"  align="left">                 <?php echo $journaldate; ?> </td>              <td  width="180" class="bodytext31" valign="middle"  align="left">                 <?php echo 'Journal Entry Credit'.' - '.ucfirst($jusername); ?> </td>              <td  width="80" class="bodytext31" valign="middle"  align="left">&nbsp;</td>			  <td  width="126" class="bodytext31" valign="middle"  align="left">&nbsp;</td>              <td  width="100" class="bodytext31" valign="middle"  align="left"><?php echo $jdocno;?></td>              <td class="bodytext31" valign="center"  align="left">&nbsp;</td>              <td  width="100" class="bodytext31" valign="middle"  align="right">			  <?php if($journalcredit<0){ echo number_format(abs($resjournalcreditpayment),2,'.',','); } ?></td>              <td  width="100" class="bodytext31" valign="middle"  align="right">			     <?php if($journalcredit>=0){ echo number_format(abs($resjournalcreditpayment),2,'.','');}?> </td>				<!-- <td  width="40" class="bodytext31" valign="middle"  align="right">			     <?php echo $days_between;?> </td> -->               <td  width="80" class="bodytext31" valign="middle"  align="right">			     <?php echo number_format($totalat,2,'.',','); ?> </td>           </tr>					  <?php		  }		  }		  		  }		  ?>		  		    <!-- /////////////////////////////////////// DEBIT NOTES //////////////// -->		   <?php// 		  $query51 = "select auto_number from paymentmodecredit where billnumber='$res45billnumber'";// 		  $exec51 = mysql_query($query51) or die ("Error in Query5".mysql_error());// 		   $num = mysql_num_rows($exec51);// //$num=0;// 		//  while ($res51 = mysql_fetch_array($exec51))// 		if($num>0)// 		  {// 		  $paymentdocno = $res45['billnumber'];// 		  $res5transactionamount = $res45['totalfxamount'];// 		  $res5transactiondate = $res45['groupdate'];		  		    $query5 = "SELECT * from supplier_debit_transactions where supplier_id = '$arraysuppliercode' and date(created_at) between '$ADate1' and '$ADate2'  order by created_at ASC";		  $exec5 = mysqli_query($GLOBALS["___mysqli_ston"], $query5) or die ("Error in Query5".mysqli_error($GLOBALS["___mysqli_ston"]));		  $num5 = mysqli_num_rows($exec5);		  if($num5 > 0)		  {		  while($res5 = mysqli_fetch_array($exec5))		  {     	  	      // $res5patientname = $res5['suppliername'];		  // $res5patientcode = $res5['suppliercode'];		  		  // $res5billnumber = $res5['billnumber'];		  // $res5openingbalance = $res5['openingbalance'];		  $res5openingbalance = '';		  $res5docnumber = $res5['approve_id'];		  $created_at = $res5['created_at'];		  // $res5particulars = $res5['particulars'];		  $res5transactionamount = $res5['total_amount'];		  //$res5particulars = substr($res5particulars,2,6);		  // $res5transactionmode= $res5['transactionmode'];		  // $res5chequenumber= $res5['chequenumber'];		  // $res5remarks = $res5['remarks'];		  		  // $query15 = "select * from master_purchase where billnumber = '$res5billnumber' ";		  // $exec15 = mysql_query($query15) or die ("Error in Query15".mysql_error());		  // //echo $num = mysql_num_rows($exec3);		  //  $res15 = mysql_fetch_array($exec15);		  		  // $res15supplierbillnumber = $res15['supplierbillnumber'];		   $snocount = $snocount + 1;		 		  $t1 = strtotime("$ADate2");		  $t2 = strtotime("$created_at");		  $days_between = ceil(abs($t1 - $t2) / 86400);		  $days_between = intval($days_between);		  $res5transactionamount = $res5transactionamount / $exchange_rate;		  	  if($days_between <= 30)		  {		  $totalamount30 = $totalamount30 - $res5transactionamount;		  		 //echo $totalamount30;		  }		  else if(($days_between >30) && ($days_between <=60))		  {		  $totalamount60 = $totalamount60 - $res5transactionamount;		 		  }		  else if(($days_between >60) && ($days_between <=90))		  {		  $totalamount90 = $totalamount90 - $res5transactionamount;		  		  }		  else if(($days_between >90) && ($days_between <=120))		  {		 		  $totalamount120 = $totalamount120 - $res5transactionamount;		 		  }		  else if(($days_between >120) && ($days_between <=180))		  {		 		  $totalamount180 = $totalamount180 - $res5transactionamount;		 		  }		  else		  {		  		  $totalamountgreater = $totalamountgreater - $res5transactionamount;		  		  }		  				 		  $total = $res5transactionamount + $res5openingbalance;		 if($snocount=='1')		 {		  $totalat = $totalat + $openingbalance - $total;	}	else	{	 $totalat = $totalat - $total;	}		 			  			$timestamp = strtotime($created_at);			$child1 = date('Y-m-d', $timestamp); // d.m.YYYY			$child2 = date('H:i', $timestamp); // HH:ss			?>			           <tr> 			    <td  width="30" class="bodytext31" valign="middle"  align="left"><?php echo $snocount; ?></td>               <td  width="40" class="bodytext31" valign="middle"  align="left">  <?php echo $child1; ?> </td>              <td  width="160" class="bodytext31" valign="middle"  align="left"> <?php echo 'Towards Debit ' ?> </td>              <td  width="80" class="bodytext31" valign="middle"  align="left">&nbsp;</td>			  <td  width="80" class="bodytext31" valign="middle"  align="left">&nbsp;</td>              <td  width="100" class="bodytext31" valign="middle"  align="left"><?php echo $res5docnumber;?></td>              <td  width="80" class="bodytext31" valign="middle"  align="left"></td>                             <td  width="80" class="bodytext31" valign="middle"  align="right"><?php echo number_format($res5transactionamount,2,'.',','); ?> </td>              <td  width="100" class="bodytext31" valign="middle"  align="right">   </td>			<!-- 	<td  width="40" class="bodytext31" valign="middle"  align="right"> <?php echo $days_between;?> </td> -->               <td  width="125" class="bodytext31" valign="middle"  align="right">			     <?php echo number_format($totalat,2,'.',','); ?> </td>                     </tr>		   <?php		   }		   }		   // }		   ?>		   <!-- /////////////////////////////////////// DEBIT NOTES //////////////// -->				 </tbody>        </table>					<?php 			$grandtotal = $totalat;			?>		<table cellspacing="3" cellpadding="0" align="left" border="1" style="border-collapse:collapse;" width="1200" >		<tr>			<td colspan="7" class="bodytext31" valign="middle"  align="left" bgcolor="#FFFFFF">&nbsp;</td>		</tr>			<tr>				<td width="136" class="bodytext31" valign="middle"  align="right" 				bgcolor="#FFFFFF"><strong>30 days</strong></td>				<td width="136" class="bodytext31" valign="middle"  align="right" 				bgcolor="#ffffff"><strong>60 days</strong></td>				<td width="136" class="bodytext31" valign="middle"  align="right" 				bgcolor="#ffffff"><strong>90 days</strong></td>				<td width="136" class="bodytext31" valign="middle"  align="right" 				bgcolor="#ffffff"><strong>120 days</strong></td>				<td width="136" class="bodytext31" valign="middle"  align="right" 				bgcolor="#ffffff"><strong>180 days</strong></td>				<td width="136" class="bodytext31" valign="middle"  align="right" 				bgcolor="#ffffff"><strong>180+ days</strong></td>				<td width="220" class="bodytext31" valign="middle"  align="right" 				bgcolor="#ffffff"><strong>Total Outstanding</strong>&nbsp;</td>			</tr>			<tr>               <td width="136" class="bodytext31" valign="middle"  align="right"                 bgcolor="#FFFFFF"><?php echo number_format($totalamount302,2,'.',','); ?></td>              <td width="136" class="bodytext31" valign="middle"  align="right"                 bgcolor="#FFFFFF"><?php echo number_format($totalamount602,2,'.',','); ?></td>              <td width="136" class="bodytext31" valign="middle"  align="right"                 bgcolor="#FFFFFF"><?php echo number_format($totalamount902,2,'.',','); ?></td>				<td width="136" class="bodytext31" valign="middle"  align="right"                 bgcolor="#FFFFFF"><?php echo number_format($totalamount1202,2,'.',','); ?></td>				<td width="136" class="bodytext31" valign="middle"  align="right"                 bgcolor="#FFFFFF"><?php echo number_format($totalamount1802,2,'.',','); ?></td>            <td width="136" class="bodytext31" valign="middle"  align="right"                 bgcolor="#FFFFFF"><?php echo number_format($totalamountgreater2,2,'.',','); ?></td>             	 <td width="220" class="bodytext31" valign="middle"  align="right"                 bgcolor="#FFFFFF"><?php echo number_format($totalat,2,'.',','); ?>&nbsp;</td>					      </tr>				<tr>			<td colspan="7" class="bodytext31" valign="middle"  align="left" bgcolor="#FFFFFF">&nbsp;</td>		</tr>   	   </table>			<?php			}			?><?php    $content = ob_get_clean();    // convert in PDF    try    {        $html2pdf = new HTML2PDF('L', 'A4', 'en');//      $html2pdf->setModeDebug();        $html2pdf->setDefaultFont('Arial');        $html2pdf->writeHTML($content, isset($_GET['vuehtml']));        $html2pdf->Output('print_supplierstatement.pdf');    }    catch(HTML2PDF_exception $e) {        echo $e;        exit;    }?>